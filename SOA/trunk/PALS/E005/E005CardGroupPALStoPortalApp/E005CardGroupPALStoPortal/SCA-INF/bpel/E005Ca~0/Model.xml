<?xml version="1.0" encoding="UTF-8"?>
<process name="E005CardGroupPALStoPortalBPEL" targetNamespace="http://xmlns.oracle.com/E005CardGroupPALStoPortalApp/E005CardGroupPALStoPortal/E005CardGroupPALStoPortalBPEL" xmlns="http://schemas.xmlsoap.org/ws/2003/03/business-process/" xmlns:client="http://xmlns.oracle.com/E005CardGroupPALStoPortalApp/E005CardGroupPALStoPortal/E005CardGroupPALStoPortalBPEL" xmlns:ora="http://schemas.oracle.com/xpath/extension" xmlns:bpws="http://schemas.xmlsoap.org/ws/2003/03/business-process/" xmlns:ns1="http://oracle.com/sca/soapservice/E005CardGroupPALStoPortalApp/E005CardGroupPALStoPortal/E005CardGroupPALStoPortalClient" xmlns:ns2="http://xmlns.oracle.com/pcbpel/adapter/db/E005CardGroupPALStoPortalApp/E005CardGroupPALStoPortal/SelectPALSDB2DBAdaptorV1" xmlns:ns3="http://xmlns.oracle.com/pcbpel/adapter/db/E005CardGroupPALStoPortalApp/E005CardGroupPALStoPortal/SelectDeltaTSDBAdapterV1" xmlns:ns4="http://xmlns.oracle.com/pcbpel/adapter/db/E005CardGroupPALStoPortalApp/E005CardGroupPALStoPortal/MergeDeltaTSDatabaseAdapterV1" xmlns:bpelx="http://schemas.oracle.com/bpel/extension" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:ns5="http://www.statoilfuelretail.com/integration/E005/E005InvocationReqMsg" xmlns:bpel2="http://docs.oasis-open.org/wsbpel/2.0/process/executable" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ns6="http://xmlns.oracle.com/pcbpel/adapter/db/top/SelectDeltaTSDBAdapterV1" xmlns:xp20="http://www.oracle.com/XSL/Transform/java/oracle.tip.pc.services.functions.Xpath20" xmlns:aia="http://www.oracle.com/XSL/Transform/java/oracle.apps.aia.core.xpath.AIAFunctions" xmlns:oraext="http://www.oracle.com/XSL/Transform/java/oracle.tip.pc.services.functions.ExtFunc" xmlns:dvm="http://www.oracle.com/XSL/Transform/java/oracle.tip.dvm.LookupValue" xmlns:hwf="http://xmlns.oracle.com/bpel/workflow/xpath" xmlns:ids="http://xmlns.oracle.com/bpel/services/IdentityService/xpath" xmlns:bpm="http://xmlns.oracle.com/bpmn20/extensions" xmlns:xdk="http://schemas.oracle.com/bpel/extension/xpath/function/xdk" xmlns:xref="http://www.oracle.com/XSL/Transform/java/oracle.tip.xref.xpath.XRefXPathFunctions" xmlns:ldap="http://schemas.oracle.com/xpath/extension/ldap" xmlns:ns7="http://xmlns.oracle.com/pcbpel/adapter/db/E005CardGroupPALStoPortalApp/E005CardGroupPALStoPortal/GetCountPALSDB2DBAdapter" xmlns:ns8="http://xmlns.oracle.com/pcbpel/adapter/db/GetCountPALSDB2DBAdapter" xmlns:ns9="http://xmlns.oracle.com/pcbpel/adapter/db/top/SelectPALSDB2DBAdaptorV1" xmlns:ns10="http://xmlns.oracle.com/pcbpel/adapter/db/top/MergeDeltaTSDatabaseAdapterV1" xmlns:ns11="http://xmlns.oracle.com/pcbpel/adapter/db/E005CardGroupPALStoPortalApp/E005CardGroupPALStoPortal/MergeCardGroupPortalDatabaseAdaptorV1" xmlns:ns12="http://www.statoilfuelretail.com/integration/E005/MergeCardGroupValidate" xmlns:ns13="http://xmlns.oracle.com/pcbpel/adapter/db/E005CardGroupPALStoPortalApp/E005CardGroupPALStoPortal/MergeCardGroupErrorLogDatabaseAdapterV1" xmlns:ns14="http://xmlns.oracle.com/pcbpel/adapter/db/E005CardGroupPALStoPortalApp/E005CardGroupPALStoPortal/MergreCardGroupTempDatabaseAdapterV1" xmlns:ns15="http://xmlns.oracle.com/pcbpel/adapter/db/E005CardGroupPALStoPortalApp/E005CardGroupPALStoPortal/SelectSOACardGroupTempDatabaseAdapterV1" xmlns:ns16="http://xmlns.oracle.com/pcbpel/adapter/db/E005CardGroupPALStoPortalApp/E005CardGroupPALStoPortal/MergeCardGroupTempDatabaseAdapterV1" xmlns:ns17="http://xmlns.oracle.com/pcbpel/adapter/db/E005CardGroupPALStoPortalApp/E005CardGroupPALStoPortal/SelectValidCardGroupTempDatabaseAdapterV1" xmlns:ns18="http://xmlns.oracle.com/pcbpel/adapter/db/E005CardGroupPALStoPortalApp/E005CardGroupPALStoPortal/TruncSOACardGroupDatabaseAdapterV1" xmlns:ns19="http://xmlns.oracle.com/pcbpel/adapter/jms/E005CardGroupPALStoPortalApp/E005CardGroupPALStoPortal/SOAErrorHandlerJMSQAdapterV1" xmlns:ns20="http://www.statoilfuelretail.com/integration/engage/ErrorHandling.xsd" xmlns:ns21="http://xmlns.oracle.com/pcbpel/adapter/db/E005CardGroupPALStoPortalApp/E005CardGroupPALStoPortal/SelectNoEamilCardGroupErrorLogDatabaseAdapterV1" xmlns:ns22="http://xmlns.oracle.com/pcbpel/adapter/db/SelectNoEamilCardGroupErrorLogDatabaseAdapterV1" xmlns:ns23="http://xmlns.oracle.com/pcbpel/adapter/db/top/MergeCardGroupErrorLogDatabaseAdapterV1" xmlns:ns24="http://xmlns.oracle.com/pcbpel/adapter/db/E005CardGroupPALStoPortalApp/E005CardGroupPALStoPortal/UpdateEmailFlagErrorLogDatabaseAdapterV1" xmlns:ns25="http://xmlns.oracle.com/pcbpel/adapter/jms/E005CardGroupPALStoPortalApp/E005CardGroupPALStoPortal/SOAPALSNotificationJMSAdapterV1" xmlns:ns26="http://www.statoilfuelretail.com/integration/engage/PalsNotification" id="BpPrc0">
  <!-- 
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
     ORCHESTRATION LOGIC                                               
     Set of activities coordinating the flow of messages across the    
     services integrated within this business process                  
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  -->
  <partnerLinks>
    <partnerLink name="E005CardGroupPALStoPortalClient" partnerLinkType="ns1:E005CardGroupPALStoPortalClient" myRole="execute_ptt"/>
    <partnerLink name="SelectPALSDB2DBAdaptorV1" partnerLinkType="ns2:SelectPALSDB2DBAdaptorV1_plt" partnerRole="SelectPALSDB2DBAdaptorV1_role"/>
    <partnerLink name="SelectDeltaTSDBAdapterV1" partnerLinkType="ns3:SelectDeltaTSDBAdapterV1_plt" partnerRole="SelectDeltaTSDBAdapterV1_role"/>
    <partnerLink name="MergeDeltaTSDatabaseAdapterV1" partnerLinkType="ns4:MergeDeltaTSDatabaseAdapterV1_plt" partnerRole="MergeDeltaTSDatabaseAdapterV1_role"/>
    <partnerLink name="GetCountPALSDB2DBAdapter" partnerLinkType="ns7:GetCountPALSDB2DBAdapter_plt" partnerRole="GetCountPALSDB2DBAdapter_role"/>
    <partnerLink name="MergeCardGroupPortalDatabaseAdaptorV1" partnerLinkType="ns11:MergeCardGroupPortalDatabaseAdaptorV1_plt" partnerRole="MergeCardGroupPortalDatabaseAdaptorV1_role"/>
    <partnerLink name="MergeCardGroupErrorLogDatabaseAdapterV1" partnerLinkType="ns13:MergeCardGroupErrorLogDatabaseAdapterV1_plt" partnerRole="MergeCardGroupErrorLogDatabaseAdapterV1_role"/>
    <partnerLink name="SelectSOACardGroupTempDatabaseAdapterV1" partnerLinkType="ns15:SelectSOACardGroupTempDatabaseAdapterV1_plt" partnerRole="SelectSOACardGroupTempDatabaseAdapterV1_role"/>
    <partnerLink name="MergeCardGroupTempDatabaseAdapterV1" partnerLinkType="ns16:MergeCardGroupTempDatabaseAdapterV1_plt" partnerRole="MergeCardGroupTempDatabaseAdapterV1_role"/>
    <partnerLink name="SelectValidCardGroupTempDatabaseAdapterV1" partnerLinkType="ns17:SelectValidCardGroupTempDatabaseAdapterV1_plt" partnerRole="SelectValidCardGroupTempDatabaseAdapterV1_role"/>
    <partnerLink name="TruncSOACardGroupDatabaseAdapterV1" partnerLinkType="ns18:TruncSOACardGroupDatabaseAdapterV1_plt" partnerRole="TruncSOACardGroupDatabaseAdapterV1_role"/>
    <partnerLink name="SOAErrorHandlerJMSQAdapterV1" partnerLinkType="ns19:Produce_Message_plt" partnerRole="Produce_Message_role"/>
    <partnerLink name="SelectNoEamilCardGroupErrorLogDatabaseAdapterV1" partnerLinkType="ns21:SelectNoEamilCardGroupErrorLogDatabaseAdapterV1_plt" partnerRole="SelectNoEamilCardGroupErrorLogDatabaseAdapterV1_role"/>
    <partnerLink name="UpdateEmailFlagErrorLogDatabaseAdapterV1" partnerLinkType="ns24:UpdateEmailFlagErrorLogDatabaseAdapterV1_plt" partnerRole="UpdateEmailFlagErrorLogDatabaseAdapterV1_role"/>
    <partnerLink name="SOAPALSNotificationJMSAdapterV1" partnerLinkType="ns25:Produce_Message_plt" partnerRole="Produce_Message_role"/>
  </partnerLinks>
  <variables>
    <variable name="ReceiveInvocationMsg_IV" messageType="ns1:requestMessage"/>
    <variable name="BatchSize" type="xsd:integer"/>
    <variable name="InvokeSelectSOADeltaTS_IV" messageType="ns3:SelectDeltaTSDBAdapterV1Select_inputParameters"/>
    <variable name="InvokeSelectSOADeltaTS_OV" messageType="ns3:EngageSoaDeltatableCollection_msg"/>
    <variable name="DeltaTS" type="xsd:string"/>
    <variable name="InvokeGetPALSDB2CountDBAdapterIV" messageType="ns7:GetCountPALSDB2DBAdapterInput_msg"/>
    <variable name="InvokeGetPALSDB2CountDBAdapterOV" messageType="ns7:GetCountPALSDB2DBAdapterOutput_msg"/>
    <variable name="BatchCount" type="xsd:int"/>
    <variable name="InvokeSelectPALSDB2Adapter_IV" messageType="ns2:SelectPALSDB2DBAdaptorV1Select_inputParameters"/>
    <variable name="InvokeSelectPALSDB2Adapter_OV" messageType="ns2:Cc072Vs1CssffoDtaCollection_msg"/>
    <variable name="DataCount" type="xsd:integer"/>
    <variable name="InvokeMergeDeltaTSDDBAdapter_IV" messageType="ns4:EngageSoaDeltatableCollection_msg"/>
    <variable name="UserName" type="xsd:string"/>
    <variable name="CountryCode" type="xsd:string"/>
    <variable name="InvokeMergeCardGroupDBAdaptorV1_IV" messageType="ns11:PrtCardgroupCollection_msg"/>
    <!--variable name="CardGroupValidate" element="ns12:CardGroup"/-->
    <!--variable name="CardGroupValidate" element="ns12:CardGroup"/-->
    <!--variable name="CardGroupValidate" element="ns12:CardGroup"/-->
    <variable name="InvokeSOACardGroupTempDBAdapterV1_OtV" messageType="ns15:SelectSOACardGroupTempDatabaseAdapterV1OutputCollection_msg"/>
    <variable name="InvokeMergeCardGroupTempDBAdapter_IV" messageType="ns16:SoaCardgroupTempCollection_msg"/>
    <variable name="InvokeSelectValidcardGroupTempDBAdapterV1_OV" messageType="ns17:SelectValidCardGroupTempDatabaseAdapterV1OutputCollection_msg"/>
    <variable name="InvokeMergeCardGroupDatabaseAdapterV2_IV" messageType="ns11:PrtCardgroupCollection_msg"/>
    <variable name="InvokeTruncSOACardGroupTemp_IV" messageType="ns18:TruncSOACardGroupDatabaseAdapterV1Input_msg"/>
    <variable name="InvokeSOACardGroupTempDBAdapterV1_IV" messageType="ns15:SelectSOACardGroupTempDatabaseAdapterV1Input_msg"/>
    <variable name="InvokeSelectValidcardGroupTempDBAdapterV1_IV" messageType="ns17:SelectValidCardGroupTempDatabaseAdapterV1Input_msg"/>
    <variable name="InvokeSOAErrorHandlerJMSAdapter_IV" messageType="ns19:Produce_Message_msg"/>
    <variable name="InvokeSelectNoEmailCardGroupErrorLogDBAdapterV1_IV" messageType="ns21:SelectNoEamilCardGroupErrorLogDatabaseAdapterV1Input_msg"/>
    <variable name="InvokeSelectNoEmailCardGroupErrorLogDBAdapterV1_OV" messageType="ns21:SelectNoEamilCardGroupErrorLogDatabaseAdapterV1OutputCollection_msg"/>
    <variable name="InvokeSOAErrorHandlerEmailJMSQAdapterV1_IV" messageType="ns19:Produce_Message_msg"/>
    <variable name="InvokeUpdateEmailFlagErrorLog_IV" messageType="ns24:EngageSoaCardgroupErrorlogCollection_msg"/>
    <variable name="ErrorFlag" type="xsd:string"/>
    <variable name="CardGroupValidate" element="ns12:CardGroup"/>
    <variable name="PALSJNDI" type="xsd:string"/>
    <variable name="InvokeSOAPALSNotificationJMSAdapterV1_IV" messageType="ns25:Produce_Message_msg"/>
    <variable name="InvokeMergeCardGroupErrorLogDBAdapterV2_IV" messageType="ns13:EngageSoaCardgroupErrorlogCollection_msg"/>
    <variable name="InvokeMergeCardErrorLogDBAdapterIV" messageType="ns13:EngageSoaCardgroupErrorlogCollection_msg"/>
  </variables>
  <faultHandlers id="BpFhs0">
    <catch faultName="bpelx:remoteFault" id="BpCFt0">
      <sequence name="BindingFaultSequence" id="BpSeq0">
        <assign name="AssignRemoteFault" id="BpAss0">
          <copy>
            <from expression="ora:getCompositeInstanceId()"/>
            <to variable="InvokeSOAErrorHandlerJMSAdapter_IV" part="body" query="/ns20:ErrorInfo/ns20:CommonErrorData/ns20:InstanceID"/>
          </copy>
          <copy>
            <from expression="ora:getCompositeName()"/>
            <to variable="InvokeSOAErrorHandlerJMSAdapter_IV" part="body" query="/ns20:ErrorInfo/ns20:CommonErrorData/ns20:ComponentName"/>
          </copy>
          <copy>
            <from expression="'E005'"/>
            <to variable="InvokeSOAErrorHandlerJMSAdapter_IV" part="body" query="/ns20:ErrorInfo/ns20:CommonErrorData/ns20:ProjectID"/>
          </copy>
          <copy>
            <from expression="'E005CardGroupPALStoPortal'"/>
            <to variable="InvokeSOAErrorHandlerJMSAdapter_IV" part="body" query="/ns20:ErrorInfo/ns20:CommonErrorData/ns20:ProjectName"/>
          </copy>
          <copy>
            <from expression="xp20:current-dateTime()"/>
            <to variable="InvokeSOAErrorHandlerJMSAdapter_IV" part="body" query="/ns20:ErrorInfo/ns20:CommonErrorData/ns20:Timestamp"/>
          </copy>
          <copy>
            <from variable="ReceiveInvocationMsg_IV" part="part1" query="/ns5:invocationMsg/ns5:SenderSystem"/>
            <to variable="InvokeSOAErrorHandlerJMSAdapter_IV" part="body" query="/ns20:ErrorInfo/ns20:CommonErrorData/ns20:Source"/>
          </copy>
          <copy>
            <from variable="ReceiveInvocationMsg_IV" part="part1" query="/ns5:invocationMsg/ns5:ReceiverSystem"/>
            <to variable="InvokeSOAErrorHandlerJMSAdapter_IV" part="body" query="/ns20:ErrorInfo/ns20:CommonErrorData/ns20:Target"/>
          </copy>
          <copy>
            <from variable="ReceiveInvocationMsg_IV" part="part1" query="/ns5:invocationMsg/ns5:UserName"/>
            <to variable="InvokeSOAErrorHandlerJMSAdapter_IV" part="body" query="/ns20:ErrorInfo/ns20:CommonErrorData/ns20:UserID"/>
          </copy>
          <copy>
            <from expression="'TE-002'"/>
            <to variable="InvokeSOAErrorHandlerJMSAdapter_IV" part="body" query="/ns20:ErrorInfo/ns20:ErrorDetails/ns20:ErrorCode"/>
          </copy>
          <copy>
            <from expression="'Remote Fault in E005'"/>
            <to variable="InvokeSOAErrorHandlerJMSAdapter_IV" part="body" query="/ns20:ErrorInfo/ns20:ErrorDetails/ns20:ErrorSummary"/>
          </copy>
          <copy>
            <from expression="ora:getFaultAsString()"/>
            <to variable="InvokeSOAErrorHandlerJMSAdapter_IV" part="body" query="/ns20:ErrorInfo/ns20:ErrorDetails/ns20:ErrorDescription"/>
          </copy>
          <copy>
            <from expression="'E005_TE'"/>
            <to variable="InvokeSOAErrorHandlerJMSAdapter_IV" part="body" query="/ns20:ErrorInfo/ns20:ErrorNotification/ns20:LookupCriteria"/>
          </copy>
          <copy>
            <from expression="'Remote Fault occured in E005'"/>
            <to variable="InvokeSOAErrorHandlerJMSAdapter_IV" part="body" query="/ns20:ErrorInfo/ns20:ErrorNotification/ns20:Subject"/>
          </copy>
        </assign>
        <invoke name="InvokeSOARemoteErrorJMSAdapterV1" inputVariable="InvokeSOAErrorHandlerJMSAdapter_IV" partnerLink="SOAErrorHandlerJMSQAdapterV1" portType="ns19:Produce_Message_ptt" operation="Produce_Message" bpelx:invokeAsDetail="no" id="BpInv0"/>
      </sequence>
    </catch>
    <catch faultName="bpelx:bindingFault" id="BpCFt1">
      <sequence name="RemoteFaultSequence" id="BpSeq1">
        <assign name="AssignBindingFault" id="BpAss1">
          <copy>
            <from expression="ora:getCompositeInstanceId()"/>
            <to variable="InvokeSOAErrorHandlerJMSAdapter_IV" part="body" query="/ns20:ErrorInfo/ns20:CommonErrorData/ns20:InstanceID"/>
          </copy>
          <copy>
            <from expression="'E005_TE'"/>
            <to variable="InvokeSOAErrorHandlerJMSAdapter_IV" part="body" query="/ns20:ErrorInfo/ns20:ErrorNotification/ns20:LookupCriteria"/>
          </copy>
          <copy>
            <from expression="ora:getCompositeName()"/>
            <to variable="InvokeSOAErrorHandlerJMSAdapter_IV" part="body" query="/ns20:ErrorInfo/ns20:CommonErrorData/ns20:ComponentName"/>
          </copy>
          <copy>
            <from expression="'E005'"/>
            <to variable="InvokeSOAErrorHandlerJMSAdapter_IV" part="body" query="/ns20:ErrorInfo/ns20:CommonErrorData/ns20:ProjectID"/>
          </copy>
          <copy>
            <from expression="'E005CardGroupPALStoPortal'"/>
            <to variable="InvokeSOAErrorHandlerJMSAdapter_IV" part="body" query="/ns20:ErrorInfo/ns20:CommonErrorData/ns20:ProjectName"/>
          </copy>
          <copy>
            <from expression="xp20:current-dateTime()"/>
            <to variable="InvokeSOAErrorHandlerJMSAdapter_IV" part="body" query="/ns20:ErrorInfo/ns20:CommonErrorData/ns20:Timestamp"/>
          </copy>
          <copy>
            <from variable="ReceiveInvocationMsg_IV" part="part1" query="/ns5:invocationMsg/ns5:SenderSystem"/>
            <to variable="InvokeSOAErrorHandlerJMSAdapter_IV" part="body" query="/ns20:ErrorInfo/ns20:CommonErrorData/ns20:Source"/>
          </copy>
          <copy>
            <from variable="ReceiveInvocationMsg_IV" part="part1" query="/ns5:invocationMsg/ns5:ReceiverSystem"/>
            <to variable="InvokeSOAErrorHandlerJMSAdapter_IV" part="body" query="/ns20:ErrorInfo/ns20:CommonErrorData/ns20:Target"/>
          </copy>
          <copy>
            <from variable="ReceiveInvocationMsg_IV" part="part1" query="/ns5:invocationMsg/ns5:UserName"/>
            <to variable="InvokeSOAErrorHandlerJMSAdapter_IV" part="body" query="/ns20:ErrorInfo/ns20:CommonErrorData/ns20:UserID"/>
          </copy>
          <copy>
            <from expression="'TE-001'"/>
            <to variable="InvokeSOAErrorHandlerJMSAdapter_IV" part="body" query="/ns20:ErrorInfo/ns20:ErrorDetails/ns20:ErrorCode"/>
          </copy>
          <copy>
            <from expression="ora:getFaultAsString()"/>
            <to variable="InvokeSOAErrorHandlerJMSAdapter_IV" part="body" query="/ns20:ErrorInfo/ns20:ErrorDetails/ns20:ErrorDescription"/>
          </copy>
          <copy>
            <from expression="'Binding Fault'"/>
            <to variable="InvokeSOAErrorHandlerJMSAdapter_IV" part="body" query="/ns20:ErrorInfo/ns20:ErrorDetails/ns20:ErrorSummary"/>
          </copy>
          <copy>
            <from expression="'Binding Fault in E005CardGroupPALStoPortal'"/>
            <to variable="InvokeSOAErrorHandlerJMSAdapter_IV" part="body" query="/ns20:ErrorInfo/ns20:ErrorNotification/ns20:Subject"/>
          </copy>
        </assign>
        <invoke name="InvokeSOABindingErrorJMSAdapterV1" inputVariable="InvokeSOAErrorHandlerJMSAdapter_IV" partnerLink="SOAErrorHandlerJMSQAdapterV1" portType="ns19:Produce_Message_ptt" operation="Produce_Message" bpelx:invokeAsDetail="no" id="BpInv1"/>
      </sequence>
    </catch>
    <catchAll id="BpCAl0">
      <sequence name="TechniaclFaultSequence" id="BpSeq2">
        <assign name="AssignTechnicalFault" id="BpAss2">
          <copy>
            <from expression="ora:getCompositeInstanceId()"/>
            <to variable="InvokeSOAErrorHandlerJMSAdapter_IV" part="body" query="/ns20:ErrorInfo/ns20:CommonErrorData/ns20:InstanceID"/>
          </copy>
          <copy>
            <from expression="ora:getCompositeName()"/>
            <to variable="InvokeSOAErrorHandlerJMSAdapter_IV" part="body" query="/ns20:ErrorInfo/ns20:CommonErrorData/ns20:ComponentName"/>
          </copy>
          <copy>
            <from expression="'E005'"/>
            <to variable="InvokeSOAErrorHandlerJMSAdapter_IV" part="body" query="/ns20:ErrorInfo/ns20:CommonErrorData/ns20:ProjectID"/>
          </copy>
          <copy>
            <from expression="'E005CardGroupPALStoPortal'"/>
            <to variable="InvokeSOAErrorHandlerJMSAdapter_IV" part="body" query="/ns20:ErrorInfo/ns20:CommonErrorData/ns20:ProjectName"/>
          </copy>
          <copy>
            <from expression="xp20:current-dateTime()"/>
            <to variable="InvokeSOAErrorHandlerJMSAdapter_IV" part="body" query="/ns20:ErrorInfo/ns20:CommonErrorData/ns20:Timestamp"/>
          </copy>
          <copy>
            <from variable="ReceiveInvocationMsg_IV" part="part1" query="/ns5:invocationMsg/ns5:SenderSystem"/>
            <to variable="InvokeSOAErrorHandlerJMSAdapter_IV" part="body" query="/ns20:ErrorInfo/ns20:CommonErrorData/ns20:Source"/>
          </copy>
          <copy>
            <from variable="ReceiveInvocationMsg_IV" part="part1" query="/ns5:invocationMsg/ns5:ReceiverSystem"/>
            <to variable="InvokeSOAErrorHandlerJMSAdapter_IV" part="body" query="/ns20:ErrorInfo/ns20:CommonErrorData/ns20:Target"/>
          </copy>
          <copy>
            <from variable="ReceiveInvocationMsg_IV" part="part1" query="/ns5:invocationMsg/ns5:UserName"/>
            <to variable="InvokeSOAErrorHandlerJMSAdapter_IV" part="body" query="/ns20:ErrorInfo/ns20:CommonErrorData/ns20:UserID"/>
          </copy>
          <copy>
            <from expression="'TE-003'"/>
            <to variable="InvokeSOAErrorHandlerJMSAdapter_IV" part="body" query="/ns20:ErrorInfo/ns20:ErrorDetails/ns20:ErrorCode"/>
          </copy>
          <copy>
            <from expression="'Internal Technical Fault. Please refer to description for more deatils.'"/>
            <to variable="InvokeSOAErrorHandlerJMSAdapter_IV" part="body" query="/ns20:ErrorInfo/ns20:ErrorDetails/ns20:ErrorSummary"/>
          </copy>
          <copy>
            <from expression="ora:getFaultAsString()"/>
            <to variable="InvokeSOAErrorHandlerJMSAdapter_IV" part="body" query="/ns20:ErrorInfo/ns20:ErrorDetails/ns20:ErrorDescription"/>
          </copy>
          <copy>
            <from expression="'E005_TE'"/>
            <to variable="InvokeSOAErrorHandlerJMSAdapter_IV" part="body" query="/ns20:ErrorInfo/ns20:ErrorNotification/ns20:LookupCriteria"/>
          </copy>
          <copy>
            <from expression="'Technical Fault in E005'"/>
            <to variable="InvokeSOAErrorHandlerJMSAdapter_IV" part="body" query="/ns20:ErrorInfo/ns20:ErrorNotification/ns20:Subject"/>
          </copy>
        </assign>
        <invoke name="InvokeSOATFErrorJMSAdapterV1" inputVariable="InvokeSOAErrorHandlerJMSAdapter_IV" partnerLink="SOAErrorHandlerJMSQAdapterV1" portType="ns19:Produce_Message_ptt" operation="Produce_Message" bpelx:invokeAsDetail="no" id="BpInv2"/>
      </sequence>
    </catchAll>
  </faultHandlers>
  <sequence name="main" id="BpSeq3">
    <receive name="ReceiveCardGroupInvocationMsg" createInstance="yes" variable="ReceiveInvocationMsg_IV" partnerLink="E005CardGroupPALStoPortalClient" portType="ns1:execute_ptt" operation="execute" id="BpRcv0"/>
    <assign name="AssignInitialValues" id="BpAss3">
      <copy>
        <from variable="ReceiveInvocationMsg_IV" part="part1" query="/ns5:invocationMsg/ns5:BatchSize"/>
        <to variable="BatchSize"/>
      </copy>
      <copy>
        <from variable="ReceiveInvocationMsg_IV" part="part1" query="/ns5:invocationMsg/ns5:DatabaseJNDI"/>
        <to variable="PALSJNDI"/>
      </copy>
      <copy>
        <from expression="'NO'"/>
        <to variable="ErrorFlag"/>
      </copy>
    </assign>
    <scope name="GetDeltaTSScope" variableAccessSerializable="no" id="BpScp0">
      <sequence name="GetDeltaTSSequence" id="BpSeq4">
        <assign name="AssignSelectDeltaTSInputvalues" id="BpAss4">
          <copy>
            <from variable="ReceiveInvocationMsg_IV" part="part1" query="/ns5:invocationMsg/ns5:CountryCode"/>
            <to variable="InvokeSelectSOADeltaTS_IV" part="SelectDeltaTSDBAdapterV1Select_inputParameters" query="/ns6:SelectDeltaTSDBAdapterV1Select_countrycode_interfaceidInputParameters/ns6:countrycode"/>
          </copy>
          <copy>
            <from variable="ReceiveInvocationMsg_IV" part="part1" query="/ns5:invocationMsg/ns5:InterfaceID"/>
            <to variable="InvokeSelectSOADeltaTS_IV" part="SelectDeltaTSDBAdapterV1Select_inputParameters" query="/ns6:SelectDeltaTSDBAdapterV1Select_countrycode_interfaceidInputParameters/ns6:interfaceid"/>
          </copy>
        </assign>
        <invoke name="InvokeSelectSOADeltaTS" inputVariable="InvokeSelectSOADeltaTS_IV" outputVariable="InvokeSelectSOADeltaTS_OV" partnerLink="SelectDeltaTSDBAdapterV1" portType="ns3:SelectDeltaTSDBAdapterV1_ptt" operation="SelectDeltaTSDBAdapterV1Select" bpelx:invokeAsDetail="no" id="BpInv3"/>
        </sequence>
        </scope>
        <switch name="TimeStampSwitch" id="BpSwt0">
          <case condition="count(bpws:getVariableData('InvokeSelectSOADeltaTS_OV','EngageSoaDeltatableCollection','/ns6:EngageSoaDeltatableCollection/ns6:EngageSoaDeltatable')) >0">
            <bpelx:annotation>
              <bpelx:general>
                <bpelx:property name="userLabel">DELTA_TS Exists</bpelx:property>
              </bpelx:general>
            </bpelx:annotation>
            <sequence name="ConvertDelta_TS_Sequence" id="BpSeq5">
              <assign name="AssignDeltaTS" id="BpAss5">
                <copy>
                  <from variable="InvokeSelectSOADeltaTS_OV" part="EngageSoaDeltatableCollection" query="/ns6:EngageSoaDeltatableCollection/ns6:EngageSoaDeltatable/ns6:palsDeltaTimestamp"/>
                  <to variable="DeltaTS"/>
                </copy>
              </assign>
              <assign name="ConvertDateTime" id="BpAss6">
                <copy>
                  <from expression="substring-before(bpws:getVariableData('DeltaTS'),'+')"/>
                  <to variable="DeltaTS"/>
                </copy>
                <copy>
                  <from expression="concat(substring-before(bpws:getVariableData('DeltaTS'),'T'),' ',substring-after(bpws:getVariableData('DeltaTS'),'T'))"/>
                  <to variable="DeltaTS"/>
                </copy>
              </assign>
            </sequence>
          </case>
          <otherwise>
            <assign name="AssignDefaultDeltaTS" id="BpAss7">
              <copy>
                <from expression="'0001-01-01 00:00:00.000000'"/>
                <to variable="DeltaTS"/>
              </copy>
            </assign>
          </otherwise>
        </switch>
        <scope name="GetCountFromPALSScope" variableAccessSerializable="no" id="BpScp1">
          <sequence name="GetCountFromPALSSequence" id="BpSeq6">
            <assign name="AssignDeltaTSValue" id="BpAss8">
              <copy>
                <from variable="DeltaTS"/>
                <to variable="InvokeGetPALSDB2CountDBAdapterIV" part="GetCountPALSDB2DBAdapterInput_msg" query="/ns8:GetCountPALSDB2DBAdapterInput/ns8:DeltaTS"/>
              </copy>
            </assign>
            <invoke name="InvokeGetPALSDB2CountDBAdapter" inputVariable="InvokeGetPALSDB2CountDBAdapterIV" outputVariable="InvokeGetPALSDB2CountDBAdapterOV" partnerLink="GetCountPALSDB2DBAdapter" portType="ns7:GetCountPALSDB2DBAdapter_ptt" operation="GetCountPALSDB2DBAdapter" bpelx:invokeAsDetail="no" id="BpInv4">
                    <bpelx:inputProperty name="jca.jndi" variable="PALSJNDI"/>
                    </invoke>
        <switch name="Switch1" id="BpSwt1">
          <case condition="(bpws:getVariableData('ReceiveInvocationMsg_IV','part1','/ns5:invocationMsg/ns5:BatchCount')!='') and (number(bpws:getVariableData('ReceiveInvocationMsg_IV','part1','/ns5:invocationMsg/ns5:BatchCount') &lt; ceiling(bpws:getVariableData('InvokeGetPALSDB2CountDBAdapterOV','GetCountPALSDB2DBAdapterOutput','/ns8:GetCountPALSDB2DBAdapterOutput/ns8:count')div bpws:getVariableData('BatchSize')))) ">
            <bpelx:annotation>
              <bpelx:general>
                <bpelx:property name="userLabel">Batch Count Given</bpelx:property>
              </bpelx:general>
            </bpelx:annotation>
            <assign name="AssignBatchCount" id="BpAss9">
              <copy>
                <from variable="ReceiveInvocationMsg_IV" part="part1" query="/ns5:invocationMsg/ns5:BatchCount"/>
                <to variable="BatchCount"/>
              </copy>
            </assign>
          </case>
          <otherwise>
            <assign name="CalculateBatchCount" id="BpAss10">
              <copy>
                <from expression="ceiling(bpws:getVariableData('InvokeGetPALSDB2CountDBAdapterOV','GetCountPALSDB2DBAdapterOutput','/ns8:GetCountPALSDB2DBAdapterOutput/ns8:count')div bpws:getVariableData('BatchSize'))"/>
                <to variable="BatchCount"/>
              </copy>
            </assign>
          </otherwise>
        </switch>
          </sequence>
        </scope>
        <while name="WhileEachBatch" condition="bpws:getVariableData('BatchCount') != 0" id="BpWhl0">
          <sequence name="WhileLoopSequence" id="BpSeq7">
            <scope name="GetPALSDataScope" variableAccessSerializable="no" id="BpScp2">
              <sequence name="GetPALSDataSequence" id="BpSeq8">
                <assign name="AssignLatestDeltaTS" id="BpAss11">
                  <copy>
                    <from variable="ReceiveInvocationMsg_IV" part="part1" query="/ns5:invocationMsg/ns5:InterfaceID"/>
                    <to variable="InvokeSelectSOADeltaTS_IV" part="SelectDeltaTSDBAdapterV1Select_inputParameters" query="/ns6:SelectDeltaTSDBAdapterV1Select_countrycode_interfaceidInputParameters/ns6:interfaceid"/>
                  </copy>
                  <copy>
                    <from variable="ReceiveInvocationMsg_IV" part="part1" query="/ns5:invocationMsg/ns5:CountryCode"/>
                    <to variable="InvokeSelectSOADeltaTS_IV" part="SelectDeltaTSDBAdapterV1Select_inputParameters" query="/ns6:SelectDeltaTSDBAdapterV1Select_countrycode_interfaceidInputParameters/ns6:countrycode"/>
                  </copy>
                </assign>
                <invoke name="InvokeSOADeltaTS" inputVariable="InvokeSelectSOADeltaTS_IV" outputVariable="InvokeSelectSOADeltaTS_OV" partnerLink="SelectDeltaTSDBAdapterV1" portType="ns3:SelectDeltaTSDBAdapterV1_ptt" operation="SelectDeltaTSDBAdapterV1Select" bpelx:invokeAsDetail="no" id="BpInv5"/>
                <switch name="TimeStampSwitch2" id="BpSwt2">
                  <case condition="count(bpws:getVariableData('InvokeSelectSOADeltaTS_OV','EngageSoaDeltatableCollection','/ns6:EngageSoaDeltatableCollection/ns6:EngageSoaDeltatable')) > 0">
                    <bpelx:annotation>
                      <bpelx:general>
                        <bpelx:property name="userLabel">DELTA_TS Exists</bpelx:property>
                      </bpelx:general>
                    </bpelx:annotation>
                    <sequence name="ConvertDelta_TSSequence" id="BpSeq9">
                      <assign name="AssignDeltaTS" id="BpAss12">
                        <copy>
                          <from variable="InvokeSelectSOADeltaTS_OV" part="EngageSoaDeltatableCollection" query="/ns6:EngageSoaDeltatableCollection/ns6:EngageSoaDeltatable/ns6:palsDeltaTimestamp"/>
                          <to variable="DeltaTS"/>
                        </copy>
                      </assign>
                      <assign name="ConvertDateTime" id="BpAss13">
                    <copy>
                      <from expression="substring-before(bpws:getVariableData('DeltaTS'),'+')"/>
                      <to variable="DeltaTS"/>
                    </copy>
                    <copy>
                      <from expression="concat(substring-before(bpws:getVariableData('DeltaTS'),'T'),' ',substring-after(bpws:getVariableData('DeltaTS'),'T'))"/>
                      <to variable="DeltaTS"/>
                    </copy>
                  </assign>
                    </sequence>
                  </case>
                  <otherwise>
                    <assign name="AssignDefaultDeltaTS" id="BpAss14">
                      <copy>
                        <from expression="'0001-01-01 00:00:00.000000'"/>
                        <to variable="DeltaTS"/>
                      </copy>
                    </assign>
                  </otherwise>
                </switch>
                <assign name="AssignSelectPALSDB2IV" id="BpAss15">
                  <copy>
                    <from variable="DeltaTS"/>
                    <to variable="InvokeSelectPALSDB2Adapter_IV" part="SelectPALSDB2DBAdaptorV1Select_inputParameters" query="/ns9:SelectPALSDB2DBAdaptorV1Select_DeltaTS_BatchSizeInputParameters/ns9:DeltaTS"/>
                  </copy>
                  <copy>
                    <from variable="BatchSize"/>
                    <to variable="InvokeSelectPALSDB2Adapter_IV" part="SelectPALSDB2DBAdaptorV1Select_inputParameters" query="/ns9:SelectPALSDB2DBAdaptorV1Select_DeltaTS_BatchSizeInputParameters/ns9:BatchSize"/>
                  </copy>
                </assign>
                <invoke name="InvokeSelectPALSDB2Adapter" inputVariable="InvokeSelectPALSDB2Adapter_IV" outputVariable="InvokeSelectPALSDB2Adapter_OV" partnerLink="SelectPALSDB2DBAdaptorV1" portType="ns2:SelectPALSDB2DBAdaptorV1_ptt" operation="SelectPALSDB2DBAdaptorV1Select" bpelx:invokeAsDetail="no" id="BpInv6">
                        <bpelx:inputProperty name="jca.jndi" variable="PALSJNDI"/>
                        </invoke>
                <assign name="GetDataCount" id="BpAss16">
                  <copy>
                    <from expression="count(bpws:getVariableData('InvokeSelectPALSDB2Adapter_OV','Cc072Vs1CssffoDtaCollection','/ns9:Cc072Vs1CssffoDtaCollection/ns9:Cc072Vs1CssffoDta'))"/>
                    <to variable="DataCount"/>
                  </copy>
                </assign>
              </sequence>
            </scope>
            <scope name="ValidateSelectDB2Scope" variableAccessSerializable="no" id="BpScp3">
              <faultHandlers id="BpFhs1">
                <catch faultName="bpelx:invalidVariables" id="BpCFt2">
                  <sequence name="PALSDB2ErrorSequence" id="BpSeq10">
                    <assign name="xformCarrdGroupValidatetoCardGroupError" id="BpAss17">
                      <bpelx:annotation>
                        <bpelx:pattern>transformation</bpelx:pattern>
                      </bpelx:annotation>
                      <copy>
                        <from expression="ora:doXSLTransformForDoc('xsl/CardGroupValidate_to_MergeCardGroupErrorLog.xsl', $CardGroupValidate, 'ReceiveInvocationMsg_IV.part1', $ReceiveInvocationMsg_IV.part1)"/>
                        <to variable="InvokeMergeCardErrorLogDBAdapterIV" part="EngageSoaCardgroupErrorlogCollection"/>
                      </copy>
                    </assign>
                    <invoke name="InvokeMergeCardErrorLogDBAdapter" inputVariable="InvokeMergeCardErrorLogDBAdapterIV" partnerLink="MergeCardGroupErrorLogDatabaseAdapterV1" portType="ns13:MergeCardGroupErrorLogDatabaseAdapterV1_ptt" operation="merge" bpelx:invokeAsDetail="no" id="BpInv7"/>
                <assign name="AssignErrorFlag" id="BpAss18">
                  <copy>
                    <from expression="'YES'"/>
                    <to variable="ErrorFlag"/>
                  </copy>
                </assign>
              </sequence>
                </catch>
              </faultHandlers>
              <sequence name="SelectDB2ValidateSequence" id="BpSeq11">
                <assign name="xformPALSDB2toCardGroupValidate" id="BpAss19">
                  <bpelx:annotation>
                    <bpelx:pattern>transformation</bpelx:pattern>
                  </bpelx:annotation>
                  <copy>
                    <from expression="ora:doXSLTransformForDoc('xsl/SelectPALSDB2_to_CardGroupValidate.xsl', $InvokeSelectPALSDB2Adapter_OV.Cc072Vs1CssffoDtaCollection)"/>
                    <to variable="CardGroupValidate"/>
                  </copy>
                </assign>
                <bpelx:validate name="ValidateCardGroupValidate" variables="CardGroupValidate" id="BpVal0"/>
              </sequence>
            </scope>
            <scope name="MergeCardGroupScope" variableAccessSerializable="no" id="BpScp4">
              <faultHandlers id="BpFhs2">
                <catch faultName="bpelx:bindingFault" id="BpCFt3">
                  <switch name="BindingFaultSwitch" id="BpSwt3">
                    <case condition="contains(ora:getFaultAsString(),'integrity constraint')">
                      <bpelx:annotation>
                        <bpelx:general>
                          <bpelx:property name="userLabel">If ForiegnKey Constraint is violated</bpelx:property>
                        </bpelx:general>
                      </bpelx:annotation>
                      <sequence name="HandleForiegnKeyConstraintSequence" id="BpSeq12">
                        <assign name="xformMergeCardGrouptoMergeCardGroupTemp" id="BpAss20">
                          <bpelx:annotation>
                            <bpelx:pattern>transformation</bpelx:pattern>
                          </bpelx:annotation>
                          <copy>
                            <from expression="ora:doXSLTransformForDoc('xsl/SelectPALSDB2_to_MergeCardgroupTemp.xsl', $InvokeSelectPALSDB2Adapter_OV.Cc072Vs1CssffoDtaCollection, 'ReceiveInvocationMsg_IV.part1', $ReceiveInvocationMsg_IV.part1)"/>
                            <to part="SoaCardgroupTempCollection" variable="InvokeMergeCardGroupTempDBAdapter_IV"/>
                          </copy>
                        </assign>
                        <invoke name="InvokeMergeCardGroupTempDBAdapter" inputVariable="InvokeMergeCardGroupTempDBAdapter_IV" partnerLink="MergeCardGroupTempDatabaseAdapterV1" portType="ns16:MergeCardGroupTempDatabaseAdapterV1_ptt" operation="merge" bpelx:invokeAsDetail="no" id="BpInv8"/>
                        <invoke name="InvokeSOACardGroupTempDBAdapterV1" outputVariable="InvokeSOACardGroupTempDBAdapterV1_OtV" partnerLink="SelectSOACardGroupTempDatabaseAdapterV1" portType="ns15:SelectSOACardGroupTempDatabaseAdapterV1_ptt" operation="SelectSOACardGroupTempDatabaseAdapterV1" inputVariable="InvokeSOACardGroupTempDBAdapterV1_IV" bpelx:invokeAsDetail="no" id="BpInv9"/>
                        <assign name="xformCardGroupTemptoCardGroupError" id="BpAss21">
                          <bpelx:annotation>
                            <bpelx:pattern>transformation</bpelx:pattern>
                          </bpelx:annotation>
                          <copy>
                            <from expression="ora:doXSLTransformForDoc('xsl/CardGroupTemp_to_CardGroupError.xsl', $InvokeSOACardGroupTempDBAdapterV1_OtV.SelectSOACardGroupTempDatabaseAdapterV1OutputCollection)"/>
                            <to variable="InvokeMergeCardGroupErrorLogDBAdapterV2_IV" part="EngageSoaCardgroupErrorlogCollection"/>
                          </copy>
                        </assign>
                        <invoke name="InvokeMergeCardGroupErrorLogDBAdapterV2" inputVariable="InvokeMergeCardGroupErrorLogDBAdapterV2_IV" partnerLink="MergeCardGroupErrorLogDatabaseAdapterV1" portType="ns13:MergeCardGroupErrorLogDatabaseAdapterV1_ptt" operation="merge" bpelx:invokeAsDetail="no" id="BpInv10"/>
                        <invoke name="InvokeSelectValidcardGroupTempDBAdapterV1" outputVariable="InvokeSelectValidcardGroupTempDBAdapterV1_OV" partnerLink="SelectValidCardGroupTempDatabaseAdapterV1" portType="ns17:SelectValidCardGroupTempDatabaseAdapterV1_ptt" operation="SelectValidCardGroupTempDatabaseAdapterV1" inputVariable="InvokeSelectValidcardGroupTempDBAdapterV1_IV" bpelx:invokeAsDetail="no" id="BpInv11"/>
                        <assign name="xformValidcardGroupTemptoCardGroup" id="BpAss22">
                          <bpelx:annotation>
                            <bpelx:pattern>transformation</bpelx:pattern>
                          </bpelx:annotation>
                          <copy>
                            <from expression="ora:doXSLTransformForDoc('xsl/validCardGroup_to_MergeCardGroup.xsl', $InvokeSelectValidcardGroupTempDBAdapterV1_OV.SelectValidCardGroupTempDatabaseAdapterV1OutputCollection)"/>
                            <to variable="InvokeMergeCardGroupDatabaseAdapterV2_IV" part="PrtCardgroupCollection"/>
                          </copy>
                        </assign>
                        <invoke name="InvokeMergeCardGroupDatabaseAdapterV2" inputVariable="InvokeMergeCardGroupDatabaseAdapterV2_IV" partnerLink="MergeCardGroupPortalDatabaseAdaptorV1" portType="ns11:MergeCardGroupPortalDatabaseAdaptorV1_ptt" operation="merge" bpelx:invokeAsDetail="no" id="BpInv12"/>
                        <invoke name="InvokeTruncSOACardGroupTemp" inputVariable="InvokeTruncSOACardGroupTemp_IV" partnerLink="TruncSOACardGroupDatabaseAdapterV1" portType="ns18:TruncSOACardGroupDatabaseAdapterV1_ptt" operation="TruncSOACardGroupDatabaseAdapterV1" bpelx:invokeAsDetail="no" id="BpInv13"/>
                    <assign name="AssignErrorFlag" id="BpAss23">
                      <copy>
                        <from expression="'YES'"/>
                        <to variable="ErrorFlag"/>
                      </copy>
                    </assign>
                  </sequence>
                    </case>
                    <otherwise>
                      <sequence name="BindingFaultSequence" id="BpSeq13">
                        <assign name="AssignBindingfault" id="BpAss24">
                      <copy>
                        <from expression="ora:getCompositeInstanceId()"/>
                        <to variable="InvokeSOAErrorHandlerJMSAdapter_IV" part="body" query="/ns20:ErrorInfo/ns20:CommonErrorData/ns20:InstanceID"/>
                      </copy>
                      <copy>
                        <from expression="'E005_TE'"/>
                        <to variable="InvokeSOAErrorHandlerJMSAdapter_IV" part="body" query="/ns20:ErrorInfo/ns20:ErrorNotification/ns20:LookupCriteria"/>
                      </copy>
                      <copy>
                        <from expression="ora:getCompositeName()"/>
                        <to variable="InvokeSOAErrorHandlerJMSAdapter_IV" part="body" query="/ns20:ErrorInfo/ns20:CommonErrorData/ns20:ComponentName"/>
                      </copy>
                      <copy>
                        <from expression="'E005'"/>
                        <to variable="InvokeSOAErrorHandlerJMSAdapter_IV" part="body" query="/ns20:ErrorInfo/ns20:CommonErrorData/ns20:ProjectID"/>
                      </copy>
                      <copy>
                        <from expression="'E005CardGroupPALStoPortal'"/>
                        <to variable="InvokeSOAErrorHandlerJMSAdapter_IV" part="body" query="/ns20:ErrorInfo/ns20:CommonErrorData/ns20:ProjectName"/>
                      </copy>
                      <copy>
                        <from expression="xp20:current-dateTime()"/>
                        <to variable="InvokeSOAErrorHandlerJMSAdapter_IV" part="body" query="/ns20:ErrorInfo/ns20:CommonErrorData/ns20:Timestamp"/>
                      </copy>
                      <copy>
                        <from variable="ReceiveInvocationMsg_IV" part="part1" query="/ns5:invocationMsg/ns5:SenderSystem"/>
                        <to variable="InvokeSOAErrorHandlerJMSAdapter_IV" part="body" query="/ns20:ErrorInfo/ns20:CommonErrorData/ns20:Source"/>
                      </copy>
                      <copy>
                        <from variable="ReceiveInvocationMsg_IV" part="part1" query="/ns5:invocationMsg/ns5:ReceiverSystem"/>
                        <to variable="InvokeSOAErrorHandlerJMSAdapter_IV" part="body" query="/ns20:ErrorInfo/ns20:CommonErrorData/ns20:Target"/>
                      </copy>
                      <copy>
                        <from variable="ReceiveInvocationMsg_IV" part="part1" query="/ns5:invocationMsg/ns5:UserName"/>
                        <to variable="InvokeSOAErrorHandlerJMSAdapter_IV" part="body" query="/ns20:ErrorInfo/ns20:CommonErrorData/ns20:UserID"/>
                      </copy>
                      <copy>
                        <from expression="'TE-001'"/>
                        <to variable="InvokeSOAErrorHandlerJMSAdapter_IV" part="body" query="/ns20:ErrorInfo/ns20:ErrorDetails/ns20:ErrorCode"/>
                      </copy>
                      <copy>
                        <from expression="ora:getFaultAsString()"/>
                        <to variable="InvokeSOAErrorHandlerJMSAdapter_IV" part="body" query="/ns20:ErrorInfo/ns20:ErrorDetails/ns20:ErrorDescription"/>
                      </copy>
                      <copy>
                        <from expression="'Binding Fault'"/>
                        <to variable="InvokeSOAErrorHandlerJMSAdapter_IV" part="body" query="/ns20:ErrorInfo/ns20:ErrorDetails/ns20:ErrorSummary"/>
                      </copy>
                      <copy>
                        <from expression="'Binding Fault in E005CardGroupPALStoPortal'"/>
                        <to variable="InvokeSOAErrorHandlerJMSAdapter_IV" part="body" query="/ns20:ErrorInfo/ns20:ErrorNotification/ns20:Subject"/>
                      </copy>
                    </assign>
                        <invoke name="InvokeSOABindingJMSAdapterV1" inputVariable="InvokeSOAErrorHandlerJMSAdapter_IV" partnerLink="SOAErrorHandlerJMSQAdapterV1" portType="ns19:Produce_Message_ptt" operation="Produce_Message" bpelx:invokeAsDetail="no" id="BpInv14"/>
                        <terminate name="TerminateFlow" id="BpTer0"/>
                      </sequence>
                    </otherwise>
                  </switch>
                </catch>
              </faultHandlers>
              <sequence name="MergeCardGroupSequence" id="BpSeq14">
                <assign name="xformSelectPALSDB2MergeCardGroup" id="BpAss25">
                  <bpelx:annotation>
                    <bpelx:pattern>transformation</bpelx:pattern>
                  </bpelx:annotation>
                  <copy>
                    <from expression="ora:doXSLTransformForDoc('xsl/SelectPALSDB2OV_to_MergeCardGroupIV.xsl', $ReceiveInvocationMsg_IV.part1, 'InvokeSelectPALSDB2Adapter_OV.Cc072Vs1CssffoDtaCollection', $InvokeSelectPALSDB2Adapter_OV.Cc072Vs1CssffoDtaCollection)"/>
                    <to variable="InvokeMergeCardGroupDBAdaptorV1_IV" part="PrtCardgroupCollection"/>
                  </copy>
                </assign>
                <invoke name="InvokeMergeCardGroupDBAdaptorV1" inputVariable="InvokeMergeCardGroupDBAdaptorV1_IV" partnerLink="MergeCardGroupPortalDatabaseAdaptorV1" portType="ns11:MergeCardGroupPortalDatabaseAdaptorV1_ptt" operation="merge" bpelx:invokeAsDetail="no" id="BpInv15"/>
              </sequence>
            </scope>
            <assign name="AssignInvokeMergeDeltaTSIV" id="BpAss26">
          <copy>
            <from variable="ReceiveInvocationMsg_IV" part="part1" query="/ns5:invocationMsg/ns5:InterfaceID"/>
            <to variable="InvokeMergeDeltaTSDDBAdapter_IV" part="EngageSoaDeltatableCollection" query="/ns10:EngageSoaDeltatableCollection/ns10:EngageSoaDeltatable/ns10:interfaceid"/>
          </copy>
          <copy bpelx:ignoreMissingFromData="yes">
            <from variable="InvokeSelectSOADeltaTS_OV" part="EngageSoaDeltatableCollection" query="/ns6:EngageSoaDeltatableCollection/ns6:EngageSoaDeltatable/ns6:errorflag"/>
            <to variable="InvokeMergeDeltaTSDDBAdapter_IV" part="EngageSoaDeltatableCollection" query="/ns10:EngageSoaDeltatableCollection/ns10:EngageSoaDeltatable/ns10:errorflag"/>
          </copy>
          <copy>
            <from variable="ReceiveInvocationMsg_IV" part="part1" query="/ns5:invocationMsg/ns5:CountryCode"/>
            <to variable="InvokeMergeDeltaTSDDBAdapter_IV" part="EngageSoaDeltatableCollection" query="/ns10:EngageSoaDeltatableCollection/ns10:EngageSoaDeltatable/ns10:countrycode"/>
          </copy>
          <copy>
            <from variable="ReceiveInvocationMsg_IV" part="part1" query="/ns5:invocationMsg/ns5:UserName"/>
            <to variable="InvokeMergeDeltaTSDDBAdapter_IV" part="EngageSoaDeltatableCollection" query="/ns10:EngageSoaDeltatableCollection/ns10:EngageSoaDeltatable/ns10:updatedby"/>
          </copy>
          <copy>
            <from expression="xp20:current-dateTime()"/>
            <to variable="InvokeMergeDeltaTSDDBAdapter_IV" part="EngageSoaDeltatableCollection" query="/ns10:EngageSoaDeltatableCollection/ns10:EngageSoaDeltatable/ns10:modifiedbytimestamp"/>
          </copy>
          <copy>
            <from expression="bpws:getVariableData('InvokeSelectPALSDB2Adapter_OV','Cc072Vs1CssffoDtaCollection','/ns9:Cc072Vs1CssffoDtaCollection/ns9:Cc072Vs1CssffoDta[$DataCount]/ns9:deltaTs')"/>
            <to variable="InvokeMergeDeltaTSDDBAdapter_IV" part="EngageSoaDeltatableCollection" query="/ns10:EngageSoaDeltatableCollection/ns10:EngageSoaDeltatable/ns10:palsDeltaTimestamp"/>
          </copy>
          <copy>
            <from expression="bpws:getVariableData('InvokeSelectPALSDB2Adapter_OV','Cc072Vs1CssffoDtaCollection','/ns9:Cc072Vs1CssffoDtaCollection/ns9:Cc072Vs1CssffoDta[$DataCount]/ns9:deltaTs')"/>
            <to variable="DeltaTS"/>
          </copy>
        </assign>
            <invoke name="InvokeMergeDeltaTSDDBAdapter" partnerLink="MergeDeltaTSDatabaseAdapterV1" portType="ns4:MergeDeltaTSDatabaseAdapterV1_ptt" operation="merge" inputVariable="InvokeMergeDeltaTSDDBAdapter_IV" bpelx:invokeAsDetail="no" id="BpInv16"/>
            <assign name="DecrementBatchCount" id="BpAss27">
              <copy>
                <from expression="bpws:getVariableData('BatchCount')-1"/>
                <to variable="BatchCount"/>
              </copy>
            </assign>
          </sequence>
        </while>
    <scope name="NoEamilCardGroupErrorLogScope" variableAccessSerializable="no" id="BpScp5">
      <variables>
        <variable name="ErrorDesc" messageType="ns13:EngageSoaCardgroupErrorlogCollection_msg"/>
      </variables>
      <sequence name="NoEmailCardGroupErrorLogSequence" id="BpSeq15">
        <switch name="ErrorCheckSwitch" id="BpSwt4">
          <case condition="bpws:getVariableData('ErrorFlag')='YES'">
            <bpelx:annotation>
              <bpelx:general>
                <bpelx:property name="userLabel">If error occured</bpelx:property>
              </bpelx:general>
            </bpelx:annotation>
            <sequence id="BpSeq16">
              <invoke name="InvokeSelectNoEmailCardGroupErrorLogDBAdapterV1" inputVariable="InvokeSelectNoEmailCardGroupErrorLogDBAdapterV1_IV" outputVariable="InvokeSelectNoEmailCardGroupErrorLogDBAdapterV1_OV" partnerLink="SelectNoEamilCardGroupErrorLogDatabaseAdapterV1" portType="ns21:SelectNoEamilCardGroupErrorLogDatabaseAdapterV1_ptt" operation="SelectNoEamilCardGroupErrorLogDatabaseAdapterV1" bpelx:invokeAsDetail="no" id="BpInv17"/>
              <assign name="xformSelectNoEmailCardGrouptoErrorDesc" id="BpAss28">
                <bpelx:annotation>
                  <bpelx:pattern>transformation</bpelx:pattern>
                </bpelx:annotation>
                <copy>
                  <from expression="ora:doXSLTransformForDoc('xsl/SelectNoEmail_to_ErrorDesc.xsl', $InvokeSelectNoEmailCardGroupErrorLogDBAdapterV1_OV.SelectNoEamilCardGroupErrorLogDatabaseAdapterV1OutputCollection)"/>
                  <to variable="ErrorDesc" part="EngageSoaCardgroupErrorlogCollection"/>
                </copy>
              </assign>
              <assign name="AssignErrorEmailRecords" id="BpAss29">
                <copy>
                  <from expression="ora:getCompositeInstanceId()"/>
                  <to variable="InvokeSOAErrorHandlerEmailJMSQAdapterV1_IV" part="body" query="/ns20:ErrorInfo/ns20:CommonErrorData/ns20:InstanceID"/>
                </copy>
                <copy>
                  <from expression="ora:getNodeValue(bpws:getVariableData('ErrorDesc','EngageSoaCardgroupErrorlogCollection','/ns23:EngageSoaCardgroupErrorlogCollection'))"/>
                  <to variable="InvokeSOAErrorHandlerEmailJMSQAdapterV1_IV" part="body" query="/ns20:ErrorInfo/ns20:ErrorDetails/ns20:ErrorDescription"/>
                </copy>
                <copy>
                  <from expression="'E005_BE'"/>
                  <to variable="InvokeSOAErrorHandlerEmailJMSQAdapterV1_IV" part="body" query="/ns20:ErrorInfo/ns20:ErrorNotification/ns20:LookupCriteria"/>
                </copy>
                <copy>
                  <from expression="'Business Error in Interface ID: E005'"/>
                  <to variable="InvokeSOAErrorHandlerEmailJMSQAdapterV1_IV" part="body" query="/ns20:ErrorInfo/ns20:ErrorNotification/ns20:Subject"/>
                </copy>
                <copy>
                  <from expression="ora:getComponentName()"/>
                  <to variable="InvokeSOAErrorHandlerEmailJMSQAdapterV1_IV" part="body" query="/ns20:ErrorInfo/ns20:CommonErrorData/ns20:ComponentName"/>
                </copy>
                <copy>
                  <from expression="'E005'"/>
                  <to variable="InvokeSOAErrorHandlerEmailJMSQAdapterV1_IV" part="body" query="/ns20:ErrorInfo/ns20:CommonErrorData/ns20:ProjectID"/>
                </copy>
                <copy>
                  <from expression="'E005CardGroupPALStoPortal'"/>
                  <to variable="InvokeSOAErrorHandlerEmailJMSQAdapterV1_IV" part="body" query="/ns20:ErrorInfo/ns20:CommonErrorData/ns20:ProjectName"/>
                </copy>
                <copy>
                  <from expression="xp20:current-dateTime()"/>
                  <to variable="InvokeSOAErrorHandlerEmailJMSQAdapterV1_IV" part="body" query="/ns20:ErrorInfo/ns20:CommonErrorData/ns20:Timestamp"/>
                </copy>
                <copy>
                  <from variable="ReceiveInvocationMsg_IV" part="part1" query="/ns5:invocationMsg/ns5:SenderSystem"/>
                  <to variable="InvokeSOAErrorHandlerEmailJMSQAdapterV1_IV" part="body" query="/ns20:ErrorInfo/ns20:CommonErrorData/ns20:Source"/>
                </copy>
                <copy>
                  <from variable="ReceiveInvocationMsg_IV" part="part1" query="/ns5:invocationMsg/ns5:ReceiverSystem"/>
                  <to variable="InvokeSOAErrorHandlerEmailJMSQAdapterV1_IV" part="body" query="/ns20:ErrorInfo/ns20:CommonErrorData/ns20:Target"/>
                </copy>
                <copy>
                  <from variable="ReceiveInvocationMsg_IV" part="part1" query="/ns5:invocationMsg/ns5:UserName"/>
                  <to variable="InvokeSOAErrorHandlerEmailJMSQAdapterV1_IV" part="body" query="/ns20:ErrorInfo/ns20:CommonErrorData/ns20:UserID"/>
                </copy>
                <copy>
                  <from expression="'BE-026'"/>
                  <to variable="InvokeSOAErrorHandlerEmailJMSQAdapterV1_IV" part="body" query="/ns20:ErrorInfo/ns20:ErrorDetails/ns20:ErrorCode"/>
                </copy>
                <copy>
                  <from expression="'Unable to process some recoreds for InterfaceID: E005, records moved to errorlog.'"/>
                  <to variable="InvokeSOAErrorHandlerEmailJMSQAdapterV1_IV" part="body" query="/ns20:ErrorInfo/ns20:ErrorDetails/ns20:ErrorSummary"/>
                </copy>
              </assign>
              <invoke name="InvokeSOAErrorHandlerEmailJMSQAdapterV1" inputVariable="InvokeSOAErrorHandlerEmailJMSQAdapterV1_IV" partnerLink="SOAErrorHandlerJMSQAdapterV1" portType="ns19:Produce_Message_ptt" operation="Produce_Message" bpelx:invokeAsDetail="no" id="BpInv18"/>
              <assign name="xformNoEmailErrorLogtoEmailErrorlog" id="BpAss30">
                <bpelx:annotation>
                  <bpelx:pattern>transformation</bpelx:pattern>
                </bpelx:annotation>
                <copy>
                  <from expression="ora:doXSLTransformForDoc('xsl/SelectNoEmailErrorLog_to_UpdateEmailErrorlog.xsl', $InvokeSelectNoEmailCardGroupErrorLogDBAdapterV1_OV.SelectNoEamilCardGroupErrorLogDatabaseAdapterV1OutputCollection)"/>
                  <to variable="InvokeUpdateEmailFlagErrorLog_IV" part="EngageSoaCardgroupErrorlogCollection"/>
                </copy>
              </assign>
              <invoke name="InvokeUpdateEmailFlagErrorLog" inputVariable="InvokeUpdateEmailFlagErrorLog_IV" partnerLink="UpdateEmailFlagErrorLogDatabaseAdapterV1" portType="ns24:UpdateEmailFlagErrorLogDatabaseAdapterV1_ptt" operation="update" bpelx:invokeAsDetail="no" id="BpInv19"/>
                <assign name="AssignUpdateErrorFlag" id="BpAss31">
                <copy>
                  <from variable="ReceiveInvocationMsg_IV" part="part1" query="/ns5:invocationMsg/ns5:InterfaceID"/>
                  <to variable="InvokeMergeDeltaTSDDBAdapter_IV" part="EngageSoaDeltatableCollection" query="/ns10:EngageSoaDeltatableCollection/ns10:EngageSoaDeltatable/ns10:interfaceid"/>
                </copy>
                <copy>
                  <from variable="ReceiveInvocationMsg_IV" part="part1" query="/ns5:invocationMsg/ns5:CountryCode"/>
                  <to variable="InvokeMergeDeltaTSDDBAdapter_IV" part="EngageSoaDeltatableCollection" query="/ns10:EngageSoaDeltatableCollection/ns10:EngageSoaDeltatable/ns10:countrycode"/>
                </copy>
                <copy>
                  <from variable="ReceiveInvocationMsg_IV" part="part1" query="/ns5:invocationMsg/ns5:UserName"/>
                  <to variable="InvokeMergeDeltaTSDDBAdapter_IV" part="EngageSoaDeltatableCollection" query="/ns10:EngageSoaDeltatableCollection/ns10:EngageSoaDeltatable/ns10:updatedby"/>
                </copy>
                <copy>
                  <from expression="xp20:current-dateTime()"/>
                  <to variable="InvokeMergeDeltaTSDDBAdapter_IV" part="EngageSoaDeltatableCollection" query="/ns10:EngageSoaDeltatableCollection/ns10:EngageSoaDeltatable/ns10:modifiedbytimestamp"/>
                </copy>
                <copy>
                  <from variable="DeltaTS"/>
                  <to variable="InvokeMergeDeltaTSDDBAdapter_IV" part="EngageSoaDeltatableCollection" query="/ns10:EngageSoaDeltatableCollection/ns10:EngageSoaDeltatable/ns10:palsDeltaTimestamp"/>
                </copy>
                <copy>
                  <from expression="'E'"/>
                  <to variable="InvokeMergeDeltaTSDDBAdapter_IV" part="EngageSoaDeltatableCollection" query="/ns10:EngageSoaDeltatableCollection/ns10:EngageSoaDeltatable/ns10:errorflag"/>
                </copy>
              </assign>
            <invoke name="InvokeUpdateErrorFlagMergeDeltaTSDDBAdapter" partnerLink="MergeDeltaTSDatabaseAdapterV1" portType="ns4:MergeDeltaTSDatabaseAdapterV1_ptt" operation="merge" inputVariable="InvokeMergeDeltaTSDDBAdapter_IV" bpelx:invokeAsDetail="no" id="BpInv20"/>
            </sequence>
          </case>
        </switch>
        <switch name="Switch2" id="BpSwt5">
          <case condition="bpws:getVariableData('ReceiveInvocationMsg_IV','part1','/ns5:invocationMsg/ns5:LastInvocationFlag')='True'">
            <bpelx:annotation>
              <bpelx:general>
                <bpelx:property name="userLabel">If last invocation flag is set</bpelx:property>
              </bpelx:general>
            </bpelx:annotation>
            <sequence name="Sequence1" id="BpSeq17">
              <switch name="Switch4" id="BpSwt6">
                <case condition="(number(bpws:getVariableData('InvokeGetPALSDB2CountDBAdapterOV','GetCountPALSDB2DBAdapterOutput','/ns8:GetCountPALSDB2DBAdapterOutput/ns8:count'))) - ((number(bpws:getVariableData('ReceiveInvocationMsg_IV','part1','/ns5:invocationMsg/ns5:BatchSize'))* number(bpws:getVariableData('ReceiveInvocationMsg_IV','part1','/ns5:invocationMsg/ns5:BatchCount'))))>0">
                  <bpelx:annotation>
                    <bpelx:general>
                      <bpelx:property name="userLabel">If all records are not processed</bpelx:property>
                    </bpelx:general>
                  </bpelx:annotation>
                  <sequence name="Sequence3" id="BpSeq18">
                    <assign name="AssignIncompletetransferError" id="BpAss32">
                      <copy>
                        <from expression="ora:getCompositeInstanceId()"/>
                        <to variable="InvokeSOAErrorHandlerEmailJMSQAdapterV1_IV" part="body" query="/ns20:ErrorInfo/ns20:CommonErrorData/ns20:InstanceID"/>
                      </copy>
                      <copy>
                        <from expression="'Incomplete data transfer.'"/>
                        <to variable="InvokeSOAErrorHandlerEmailJMSQAdapterV1_IV" part="body" query="/ns20:ErrorInfo/ns20:ErrorDetails/ns20:ErrorDescription"/>
                      </copy>
                      <copy>
                        <from expression="'E005_BE'"/>
                        <to variable="InvokeSOAErrorHandlerEmailJMSQAdapterV1_IV" part="body" query="/ns20:ErrorInfo/ns20:ErrorNotification/ns20:LookupCriteria"/>
                      </copy>
                      <copy>
                        <from expression="'Business Error in Interface ID: E005'"/>
                        <to variable="InvokeSOAErrorHandlerEmailJMSQAdapterV1_IV" part="body" query="/ns20:ErrorInfo/ns20:ErrorNotification/ns20:Subject"/>
                      </copy>
                      <copy>
                        <from expression="ora:getComponentName()"/>
                        <to variable="InvokeSOAErrorHandlerEmailJMSQAdapterV1_IV" part="body" query="/ns20:ErrorInfo/ns20:CommonErrorData/ns20:ComponentName"/>
                      </copy>
                      <copy>
                        <from expression="'E005'"/>
                        <to variable="InvokeSOAErrorHandlerEmailJMSQAdapterV1_IV" part="body" query="/ns20:ErrorInfo/ns20:CommonErrorData/ns20:ProjectID"/>
                      </copy>
                      <copy>
                        <from expression="'E005CardGroupPALStoPortal'"/>
                        <to variable="InvokeSOAErrorHandlerEmailJMSQAdapterV1_IV" part="body" query="/ns20:ErrorInfo/ns20:CommonErrorData/ns20:ProjectName"/>
                      </copy>
                      <copy>
                        <from expression="xp20:current-dateTime()"/>
                        <to variable="InvokeSOAErrorHandlerEmailJMSQAdapterV1_IV" part="body" query="/ns20:ErrorInfo/ns20:CommonErrorData/ns20:Timestamp"/>
                      </copy>
                      <copy>
                        <from variable="ReceiveInvocationMsg_IV" part="part1" query="/ns5:invocationMsg/ns5:SenderSystem"/>
                        <to variable="InvokeSOAErrorHandlerEmailJMSQAdapterV1_IV" part="body" query="/ns20:ErrorInfo/ns20:CommonErrorData/ns20:Source"/>
                      </copy>
                      <copy>
                        <from variable="ReceiveInvocationMsg_IV" part="part1" query="/ns5:invocationMsg/ns5:ReceiverSystem"/>
                        <to variable="InvokeSOAErrorHandlerEmailJMSQAdapterV1_IV" part="body" query="/ns20:ErrorInfo/ns20:CommonErrorData/ns20:Target"/>
                      </copy>
                      <copy>
                        <from variable="ReceiveInvocationMsg_IV" part="part1" query="/ns5:invocationMsg/ns5:UserName"/>
                        <to variable="InvokeSOAErrorHandlerEmailJMSQAdapterV1_IV" part="body" query="/ns20:ErrorInfo/ns20:CommonErrorData/ns20:UserID"/>
                      </copy>
                      <copy>
                        <from expression="'BE-027'"/>
                        <to variable="InvokeSOAErrorHandlerEmailJMSQAdapterV1_IV" part="body" query="/ns20:ErrorInfo/ns20:ErrorDetails/ns20:ErrorCode"/>
                      </copy>
                      <copy>
                        <from expression="'Incomplete data transfer.'"/>
                        <to variable="InvokeSOAErrorHandlerEmailJMSQAdapterV1_IV" part="body" query="/ns20:ErrorInfo/ns20:ErrorDetails/ns20:ErrorSummary"/>
                      </copy>
                    </assign>
                    <invoke name="InvokeSOAErrorHandlingJMSQueue" inputVariable="InvokeSOAErrorHandlerEmailJMSQAdapterV1_IV" partnerLink="SOAErrorHandlerJMSQAdapterV1" portType="ns19:Produce_Message_ptt" operation="Produce_Message" bpelx:invokeAsDetail="no" id="BpInv21"/>
                  </sequence>
                </case>
                <otherwise>
                  <sequence name="Sequence2" id="BpSeq19">
                    <switch name="Switch3" id="BpSwt7">
                      <case condition="count(bpws:getVariableData('InvokeSelectSOADeltaTS_OV','EngageSoaDeltatableCollection','/ns6:EngageSoaDeltatableCollection/ns6:EngageSoaDeltatable')) >0">
                        <bpelx:annotation>
                          <bpelx:general>
                            <bpelx:property name="userLabel">if data is selected from pals</bpelx:property>
                          </bpelx:general>
                        </bpelx:annotation>
                        <assign name="AssignPALSJMSNotificationDelta" id="BpAss33">
                          <copy>
                            <from variable="ReceiveInvocationMsg_IV" part="part1" query="/ns5:invocationMsg/ns5:SenderSystem"/>
                            <to variable="InvokeSOAPALSNotificationJMSAdapterV1_IV" part="body" query="/ns26:Notification/ns26:SourceSystem"/>
                          </copy>
                          <copy>
                            <from expression="'INTEGRMGMT'"/>
                            <to variable="InvokeSOAPALSNotificationJMSAdapterV1_IV" part="body" query="/ns26:Notification/ns26:ObjectName"/>
                          </copy>
                          <copy>
                            <from expression="'Success'"/>
                            <to variable="InvokeSOAPALSNotificationJMSAdapterV1_IV" part="body" query="/ns26:Notification/ns26:ErrorFlag"/>
                          </copy>
                          <copy>
                            <from expression="'CC072VS1_CSSFFO_DTA'"/>
                            <to variable="InvokeSOAPALSNotificationJMSAdapterV1_IV" part="body" query="/ns26:Notification/ns26:SourceTableName"/>
                          </copy>
                          <copy>
                            <from expression="'PRT_CARDGROUP'"/>
                            <to variable="InvokeSOAPALSNotificationJMSAdapterV1_IV" part="body" query="/ns26:Notification/ns26:TargetTableName"/>
                          </copy>
                          <copy>
                            <from expression="xp20:current-dateTime()"/>
                            <to variable="InvokeSOAPALSNotificationJMSAdapterV1_IV" part="body" query="/ns26:Notification/ns26:NotificationDateTime"/>
                          </copy>
                          <copy>
                            <from variable="ReceiveInvocationMsg_IV" part="part1" query="/ns5:invocationMsg/ns5:CountryCode"/>
                            <to variable="InvokeSOAPALSNotificationJMSAdapterV1_IV" part="body" query="/ns26:Notification/ns26:CountryCode"/>
                          </copy>
                          <copy>
                            <from variable="ReceiveInvocationMsg_IV" part="part1" query="/ns5:invocationMsg/ns5:ReceiverSystem"/>
                            <to variable="InvokeSOAPALSNotificationJMSAdapterV1_IV" part="body" query="/ns26:Notification/ns26:TargetSystem"/>
                          </copy>
                          <copy>
                            <from variable="ReceiveInvocationMsg_IV" part="part1" query="/ns5:invocationMsg/ns5:InterfaceID"/>
                            <to variable="InvokeSOAPALSNotificationJMSAdapterV1_IV" part="body" query="/ns26:Notification/ns26:InterfaceID"/>
                          </copy>
                          <copy>
                            <from expression="'E005CardGroupPALStoPortal'"/>
                            <to variable="InvokeSOAPALSNotificationJMSAdapterV1_IV" part="body" query="/ns26:Notification/ns26:InterfaceName"/>
                          </copy>
                          <copy>
                            <from variable="DeltaTS"/>
                            <to variable="InvokeSOAPALSNotificationJMSAdapterV1_IV" part="body" query="/ns26:Notification/ns26:LastDeltaTimeStamp"/>
                          </copy>
                        </assign>
                      </case>
                      <otherwise>
                        <assign name="AssignPALSNotification" id="BpAss34">
                          <copy>
                            <from variable="ReceiveInvocationMsg_IV" part="part1" query="/ns5:invocationMsg/ns5:SenderSystem"/>
                            <to variable="InvokeSOAPALSNotificationJMSAdapterV1_IV" part="body" query="/ns26:Notification/ns26:SourceSystem"/>
                          </copy>
                          <copy>
                            <from expression="'Success'"/>
                            <to variable="InvokeSOAPALSNotificationJMSAdapterV1_IV" part="body" query="/ns26:Notification/ns26:ErrorFlag"/>
                          </copy>
                          <copy>
                            <from expression="'CC072VS1_CSSFFO_DTA'"/>
                            <to variable="InvokeSOAPALSNotificationJMSAdapterV1_IV" part="body" query="/ns26:Notification/ns26:SourceTableName"/>
                          </copy>
                          <copy>
                            <from expression="'PRT_CARDGROUP'"/>
                            <to variable="InvokeSOAPALSNotificationJMSAdapterV1_IV" part="body" query="/ns26:Notification/ns26:TargetTableName"/>
                          </copy>
                          <copy>
                            <from expression="xp20:current-dateTime()"/>
                            <to variable="InvokeSOAPALSNotificationJMSAdapterV1_IV" part="body" query="/ns26:Notification/ns26:NotificationDateTime"/>
                          </copy>
                          <copy>
                            <from variable="ReceiveInvocationMsg_IV" part="part1" query="/ns5:invocationMsg/ns5:CountryCode"/>
                            <to variable="InvokeSOAPALSNotificationJMSAdapterV1_IV" part="body" query="/ns26:Notification/ns26:CountryCode"/>
                          </copy>
                          <copy>
                            <from variable="ReceiveInvocationMsg_IV" part="part1" query="/ns5:invocationMsg/ns5:ReceiverSystem"/>
                            <to variable="InvokeSOAPALSNotificationJMSAdapterV1_IV" part="body" query="/ns26:Notification/ns26:TargetSystem"/>
                          </copy>
                          <copy>
                            <from variable="ReceiveInvocationMsg_IV" part="part1" query="/ns5:invocationMsg/ns5:InterfaceID"/>
                            <to variable="InvokeSOAPALSNotificationJMSAdapterV1_IV" part="body" query="/ns26:Notification/ns26:InterfaceID"/>
                          </copy>
                          <copy>
                            <from expression="'E005CardGroupPALStoPortal'"/>
                            <to variable="InvokeSOAPALSNotificationJMSAdapterV1_IV" part="body" query="/ns26:Notification/ns26:InterfaceName"/>
                          </copy>
                          <copy>
                            <from expression="bpws:getVariableData('InvokeSelectPALSDB2Adapter_OV','Cc072Vs1CssffoDtaCollection','/ns9:Cc072Vs1CssffoDtaCollection/ns9:Cc072Vs1CssffoDta[$DataCount]/ns9:deltaTs')"/>
                            <to variable="InvokeSOAPALSNotificationJMSAdapterV1_IV" part="body" query="/ns26:Notification/ns26:LastDeltaTimeStamp"/>
                          </copy>
                        </assign>
                      </otherwise>
                    </switch>
                    <switch name="Switch5" id="BpSwt8">
                      <case condition="bpws:getVariableData('ErrorFlag')='YES'">
                        <bpelx:annotation>
                          <bpelx:general>
                            <bpelx:property name="userLabel">if error occured</bpelx:property>
                          </bpelx:general>
                        </bpelx:annotation>
                        <assign name="AssignPALSNotifiactionWithError" id="BpAss35">
                          <copy>
                            <from expression="'Error'"/>
                            <to variable="InvokeSOAPALSNotificationJMSAdapterV1_IV" part="body" query="/ns26:Notification/ns26:ErrorFlag"/>
                          </copy>
                        </assign>
                      </case>
                    </switch>
                    <invoke name="InvokeSOAPALSNotificationJMSAdapterV1" inputVariable="InvokeSOAPALSNotificationJMSAdapterV1_IV" partnerLink="SOAPALSNotificationJMSAdapterV1" portType="ns25:Produce_Message_ptt" operation="Produce_Message" bpelx:invokeAsDetail="no" id="BpInv22"/>
                  </sequence>
                </otherwise>
              </switch>
            </sequence>
          </case>
        </switch>
      </sequence>
    </scope>
  </sequence>
</process><!--
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  Oracle JDeveloper BPEL Designer 
  
  Created: Tue May 06 16:02:02 IST 2014
  Author:  10608609
  Type: BPEL 1.1 Process
  Purpose: Empty BPEL Process
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
-->